<app-header></app-header>

<div class="flex h-screen items-center justify-center">
  <section
    class="flex w-full max-w-md flex-col gap-3 rounded-2xl border-2 border-solid bg-white p-8 shadow-xl"
  >
    <h1 class="text-center text-3xl font-medium">Perfil</h1>

    <!-- Formulário -->
    <form [formGroup]="profileForm" class="flex flex-col gap-3">
      <!-- Foto de perfil -->
      <div class="flex flex-col items-center justify-center gap-2">
        <input
          type="file"
          accept=".png, .jpg, .jpeg"
          id="photo"
          class="hidden"
          (change)="onFileSelected($event)"
          formControlName="photoPath"
        />
        <img
          *ngIf="previewUrl"
          [src]="previewUrl"
          alt="Pré-visualização da imagem"
          class="w-28 rounded-full"
        />
        <label
          class="inserir-imagem text-black-300 mt-2 cursor-pointer rounded-lg bg-slate-200 p-2 transition hover:scale-105 hover:bg-slate-300"
          for="photo"
          >Inserir Imagem</label
        >
      </div>

      <!-- Campo de nome -->
      <div class="flex flex-col">
        <label class="mb-1 text-sm font-medium text-gray-700" for="email">
          Nome
        </label>
        <input
          class="rounded-lg border border-gray-300 p-3 text-gray-900 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary"
          id="name"
          type="text"
          formControlName="name"
        />
      </div>
      <!-- Campo de e-mail -->
      <div class="flex flex-col">
        <label class="mb-1 text-sm font-medium text-gray-700" for="email">
          E-mail
        </label>
        <input
          class="rounded-lg border border-gray-300 p-3 text-gray-900 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary"
          id="email"
          type="email"
          formControlName="email"
        />
      </div>

      <!-- Campo de tipo do usuário -->
      <div class="flex flex-col">
        <label class="mb-1 text-sm font-medium text-gray-700" for="email">
          Função
        </label>
        <input
          class="cursor-not-allowed rounded-lg border border-gray-300 p-3 text-gray-900 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary"
          id="userType"
          type="text"
          formControlName="userType"
        />
      </div>

      <!-- Campo de código do usuário -->
      <div class="flex flex-col">
        <label class="mb-1 text-sm font-medium text-gray-700" for="email">
          Código
        </label>
        <input
          class="cursor-not-allowed rounded-lg border border-gray-300 p-3 text-gray-900 shadow-sm focus:border-primary focus:ring-1 focus:ring-primary"
          id="userCode"
          type="text"
          formControlName="userCode"
        />
      </div>

      @if (formWasEditted) {
        <button
          class="mt-4 rounded-lg border-2 border-primary bg-primary p-3 text-white transition hover:scale-105 hover:bg-opacity-90 disabled:opacity-50"
          [disabled]="!profileForm.valid"
          (click)="saveFormChanges()"
        >
          Salvar mudanças
        </button>
      }
    </form>
  </section>
</div>
